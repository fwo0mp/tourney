// AUTO-GENERATED FILE. DO NOT EDIT.
// Generated by web/scripts/generate-e2e.mjs.

import { test, expect } from '../fixtures/e2e';

test("CASE-002: What-if scenario lifecycle with temporary and permanent overrides", async ({ page }) => {
  // Source markdown: e2e/cases/CASE-002-whatif-scenario-lifecycle.md

  // CASE-002 Step-1: Open What-If tab and create a scenario named E2E Scenario Alpha
  // Expected: Scenario selector shows E2E Scenario Alpha as active.
  await page.goto("/");
  await page.getByTestId("dashboard-tab-whatif").click();
  await expect(page.getByTestId("whatif-tool")).toBeVisible();
  await page.getByTestId("scenario-selector-toggle").click();
  await page.getByTestId("scenario-create-button").click();
  await page.getByTestId("scenario-create-input").fill("E2E Scenario Alpha");
  await page.getByTestId("scenario-create-confirm").click();
  await expect(page.getByTestId("scenario-selector-toggle")).toContainText("E2E Scenario Alpha");

  // CASE-002 Step-2: Add a temporary Duke beats Kansas game outcome override
  // Expected: Scenario override section includes Duke beats Kansas.
  await page.getByTestId("whatif-winner-select").selectOption({ label: "Duke" });
  await page.getByTestId("whatif-loser-select").selectOption({ label: "Kansas" });
  await page.getByTestId("whatif-add-outcome").click();
  await expect(page.getByTestId("whatif-scenario-overrides")).toContainText("Duke beats Kansas");

  // CASE-002 Step-3: Add a permanent Duke +2.0 rating adjustment
  // Expected: Permanent overrides include Duke +2.0 pts.
  await page.getByTestId("whatif-permanent-adjust").check();
  await page.getByTestId("whatif-adjust-team-select").selectOption({ label: "Duke" });
  await page.getByTestId("whatif-adjust-value-input").fill("2");
  await page.getByTestId("whatif-add-adjustment").click();
  await expect(page.getByTestId("whatif-permanent-overrides")).toContainText("Duke +2.0 pts");

  // CASE-002 Step-4: Analyze scenario
  // Expected: Scenario results panel is visible.
  await page.getByTestId("whatif-analyze-button").click();
  await expect(page.getByTestId("whatif-results")).toBeVisible();
  await expect(page.getByTestId("whatif-results")).toContainText("Scenario Impact");

  // CASE-002 Step-5: Clear temporary overrides then clear all overrides
  // Expected: Scenario section empties first, then permanent section empties.
  await page.getByTestId("whatif-clear-temp").click();
  await expect(page.getByTestId("whatif-scenario-overrides")).toContainText("No scenario overrides");
  await page.getByTestId("whatif-clear-all").click();
  await expect(page.getByTestId("whatif-permanent-overrides")).toContainText("No permanent overrides");

});
