// AUTO-GENERATED FILE. DO NOT EDIT.
// Generated by web/scripts/generate-e2e.mjs.

import { test, expect } from '../fixtures/e2e';

test("CASE-006: Team detail market maker defaults for two-sided one-sided and empty markets", async ({ page }) => {
  // Source markdown: e2e/cases/CASE-006-teamdetail-marketmaker-defaults.md

  // CASE-006 Step-1: Open Team Detail and pick Duke
  // Expected: Duke defaults reflect existing bid/ask and highlighted orderbook rows are visible.
  await page.goto("/");
  await page.getByTestId("dashboard-tab-teamdetail").click();
  await page.getByTestId("teamdetail-team-select").selectOption("Duke");
  await expect(page.getByTestId("teamdetail-market-maker")).toBeVisible();
  await expect(page.getByTestId("teamdetail-market-midpoint-input")).toHaveValue("2.58");
  await expect(page.getByTestId("teamdetail-market-spread-input")).toHaveValue("5.8");
  await expect(page.getByTestId("teamdetail-market-bid-input")).toHaveValue("2.5");
  await expect(page.getByTestId("teamdetail-market-ask-input")).toHaveValue("2.65");
  await expect(page.getByTestId("teamdetail-orderbook-my-bid")).toBeVisible();
  await expect(page.getByTestId("teamdetail-orderbook-my-ask")).toBeVisible();

  // CASE-006 Step-2: Select Houston bid-only market
  // Expected: Spread resets to 5.0 and midpoint keeps live bid at 3.1.
  await page.getByTestId("teamdetail-team-select").selectOption("Houston");
  await expect(page.getByTestId("teamdetail-market-spread-input")).toHaveValue("5.0");
  await expect(page.getByTestId("teamdetail-market-midpoint-input")).toHaveValue("3.18");
  await expect(page.getByTestId("teamdetail-market-bid-input")).toHaveValue("3.1");
  await expect(page.getByTestId("teamdetail-market-ask-input")).toHaveValue("3.27");
  await expect(page.getByTestId("teamdetail-market-bid-size-input")).toHaveValue("3000");
  await expect(page.getByTestId("teamdetail-market-ask-size-input")).toHaveValue("5000");

  // CASE-006 Step-3: Select Auburn ask-only market
  // Expected: Spread resets to 5.0 and midpoint keeps live ask at 4.2.
  await page.getByTestId("teamdetail-team-select").selectOption("Auburn");
  await expect(page.getByTestId("teamdetail-market-spread-input")).toHaveValue("5.0");
  await expect(page.getByTestId("teamdetail-market-midpoint-input")).toHaveValue("4.09");
  await expect(page.getByTestId("teamdetail-market-bid-input")).toHaveValue("3.99");
  await expect(page.getByTestId("teamdetail-market-ask-input")).toHaveValue("4.2");
  await expect(page.getByTestId("teamdetail-market-bid-size-input")).toHaveValue("5000");
  await expect(page.getByTestId("teamdetail-market-ask-size-input")).toHaveValue("2000");

  // CASE-006 Step-4: Select Kansas no-market team
  // Expected: Spread is 5.0 and midpoint defaults to team EV for this team.
  await page.getByTestId("teamdetail-team-select").selectOption("Kansas");
  await expect(page.getByTestId("teamdetail-market-spread-input")).toHaveValue("5.0");
  await expect(page.getByTestId("teamdetail-market-midpoint-input")).toHaveValue("1.75");
  await expect(page.getByTestId("teamdetail-market-bid-input")).toHaveValue("1.71");
  await expect(page.getByTestId("teamdetail-market-ask-input")).toHaveValue("1.8");
  await expect(page.getByTestId("teamdetail-market-submit")).toContainText("Place Market");

});
