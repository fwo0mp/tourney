// AUTO-GENERATED FILE. DO NOT EDIT.
// Generated by web/scripts/generate-e2e.mjs.

import { test, expect } from '../fixtures/e2e';

test("CASE-003: Completed games record remove and restore team availability", async ({ page }) => {
  // Source markdown: e2e/cases/CASE-003-completed-games-record-remove.md

  // CASE-003 Step-1: Open Completed Games view
  // Expected: Completed Games controls are visible.
  await page.goto("/");
  await page.getByTestId("dashboard-tab-completed").click();
  await expect(page.getByTestId("completed-games-view")).toBeVisible();
  await expect(page.getByTestId("completed-winner-select")).toBeVisible();
  await expect(page.getByTestId("completed-loser-select")).toBeVisible();

  // CASE-003 Step-2: Record Duke beating Kansas
  // Expected: A row for Duke-Kansas appears in the completed games table.
  await page.getByTestId("completed-winner-select").selectOption({ label: "Duke" });
  await page.getByTestId("completed-loser-select").selectOption({ label: "Kansas" });
  await page.getByTestId("completed-record-button").click();
  await expect(page.getByTestId("completed-game-row-Duke-Kansas")).toBeVisible();

  // CASE-003 Step-3: Remove the recorded game
  // Expected: Completed games list is empty again.
  await page.getByTestId("completed-remove-Duke-Kansas").click();
  await expect(page.getByTestId("completed-games-view")).toContainText("No games have been recorded yet.");

  // CASE-003 Step-4: Verify Kansas can be selected as loser again
  // Expected: Loser select accepts Kansas after game removal.
  await page.getByTestId("completed-winner-select").selectOption({ label: "Duke" });
  await page.getByTestId("completed-loser-select").selectOption({ label: "Kansas" });
  await expect(page.getByTestId("completed-loser-select")).toHaveValue("Kansas");

});
