// AUTO-GENERATED FILE. DO NOT EDIT.
// Generated by web/scripts/generate-e2e.mjs.

import { test, expect } from '../fixtures/e2e';

test("CASE-006: URL navigation state roundtrip", async ({ page }) => {
  // Source markdown: e2e/cases/CASE-006-url-navigation-state-roundtrip.md

  // CASE-006 Step-1: Open Bracket tab, pick Sweet 16, and verify URL + reload restore
  // Expected: URL contains bracket tab/subview params and Sweet 16 remains selected after reload.
  await page.goto("/");
  await page.getByTestId("dashboard-tab-bracket").click();
  await expect(page.getByTestId("bracket-view")).toBeVisible();
  await page.getByTestId("bracket-view-select").selectOption("sweet16");
  await expect(page.getByTestId("bracket-view-select")).toHaveValue("sweet16");
  await expect(page).toHaveURL(new RegExp("[?&]view=bracket(?:&|$)"));
  await expect(page).toHaveURL(new RegExp("[?&]bracketView=sweet16(?:&|$)"));
  await page.reload();
  await expect(page.getByTestId("bracket-view")).toBeVisible();
  await expect(page.getByTestId("bracket-view-select")).toHaveValue("sweet16");
  await expect(page).toHaveURL(new RegExp("[?&]view=bracket(?:&|$)"));
  await expect(page).toHaveURL(new RegExp("[?&]bracketView=sweet16(?:&|$)"));

  // CASE-006 Step-2: Switch to What-If and Completed tabs and verify URL + reload restore
  // Expected: Each tab writes view param and reload returns to the same tab.
  await page.getByTestId("dashboard-tab-whatif").click();
  await expect(page.getByTestId("whatif-tool")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]view=whatif(?:&|$)"));
  await page.reload();
  await expect(page.getByTestId("whatif-tool")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]view=whatif(?:&|$)"));
  await page.getByTestId("dashboard-tab-completed").click();
  await expect(page.getByTestId("completed-games-view")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]view=completed(?:&|$)"));
  await page.reload();
  await expect(page.getByTestId("completed-games-view")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]view=completed(?:&|$)"));

  // CASE-006 Step-3: Select a game from Game Importance and verify URL + reload restore
  // Expected: URL stores selected game teams and reload keeps the game panel visible.
  await page.getByTestId("dashboard-tab-teams").click();
  await expect(page.getByTestId("game-importance-table")).toBeVisible();
  await page.getByTestId("game-importance-row").first().click();
  await expect(page.getByTestId("game-panel")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]game1=[^&]+(?:&|$)"));
  await expect(page).toHaveURL(new RegExp("[?&]game2=[^&]+(?:&|$)"));
  await page.reload();
  await expect(page.getByTestId("game-panel")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]game1=[^&]+(?:&|$)"));
  await expect(page).toHaveURL(new RegExp("[?&]game2=[^&]+(?:&|$)"));

  // CASE-006 Step-4: Select a team from game panel and verify URL + reload restore
  // Expected: URL stores selected team and reload keeps the team panel visible.
  await page.getByTestId("game-panel-team1-button").click();
  await expect(page.getByTestId("team-panel")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]team=[^&]+(?:&|$)"));
  await page.reload();
  await expect(page.getByTestId("team-panel")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]team=[^&]+(?:&|$)"));

  // CASE-006 Step-5: Open Team Detail from team panel and verify URL + reload restore
  // Expected: URL stores teamdetail tab and selected detail team, and reload keeps the same team detail view.
  await page.getByRole("button", { name: "View Details" }).click();
  await expect(page.getByTestId("teamdetail-team-select")).toBeVisible();
  await expect(page.getByTestId("teamdetail-market-maker")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]view=teamdetail(?:&|$)"));
  await expect(page).toHaveURL(new RegExp("[?&]detailTeam=[^&]+(?:&|$)"));
  await page.reload();
  await expect(page.getByTestId("teamdetail-team-select")).toBeVisible();
  await expect(page.getByTestId("teamdetail-market-maker")).toBeVisible();
  await expect(page).toHaveURL(new RegExp("[?&]view=teamdetail(?:&|$)"));
  await expect(page).toHaveURL(new RegExp("[?&]detailTeam=[^&]+(?:&|$)"));

});
